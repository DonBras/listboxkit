(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[49],{573:function(e,t,n){"use strict";var i=n(3981),o=n(8758),r=n(3960),l=["Red","Green","Blue"];var s=function(e){var t=e.multiSelect,n=void 0!==t&&t,s=r.useListbox(l,n,void 0),u=s.getOptionProps,a=s.highlightedIndex,d=i._1(s.getContainerProps,void 0),c=d.onKeyDown;return o.createElement("ul",{className:"listbox",role:d.role,tabIndex:d.tabIndex,onKeyDown:c,onFocus:d.onFocus,onBlur:d.onBlur},l.map((function(e,t){var n=i._1(u,t),r=["listbox-option",a===t?"highlighted":""].join(" ");return o.createElement("li",{key:e,"aria-selected":n["aria-selected"],className:r,role:n.role,onKeyDown:c,onClick:n.onClick},e)})))};t.S=s},8937:function(e,t,n){"use strict";var i=n(3981),o=n(8758),r=n(7361);t.useControls=function(e,t){var n=void 0!==e&&e,l=r.useControls(n,t),s=l.selectIndex,u=o.useState((function(){return!1})),a=u[1];return{hideMenu:function(e){return i._1(a,(function(e){return!1}))},highlightedIndex:l.highlightedIndex,highlightFirst:l.highlightFirst,highlightIndex:l.highlightIndex,highlightLast:l.highlightLast,highlightNext:l.highlightNext,highlightPrev:l.highlightPrev,menuVisible:u[0],resetHighlighted:l.resetHighlighted,selectedIndex:l.selectedIndex,selectedIndexes:l.selectedIndexes,selectHighlighted:l.selectHighlighted,selectIndex:function(e){return i._1(s,e),i._1(a,(function(e){return!1}))},selectNext:l.selectNext,selectPrev:l.selectPrev,showMenu:function(e){return i._1(a,(function(e){return!0}))}}}},7361:function(e,t,n){"use strict";var i=n(3981),o=n(8758),r=n(1509),l=n(7719),s=n(8956);function u(e){return 0}function a(e,t){return 1==(e-t|0)?0:t+1|0}function d(e,t){return t<=0?e-1|0:t-1|0}function c(e){return-1}var h={firstIndex:u,lastIndex:function(e,t){return e-1|0},nextIndex:a,prevIndex:d,reset:c};function g(e){return s.getWithDefault(l.get(e,0),-1)}var p=r.caml_equal,x=r.caml_notequal;function f(e,t,n,o,s){var u=void 0!==e&&e;i._1(n,(function(e){return s})),i._1(o,(function(e){var n=l.some(e,(function(e){return r.caml_equal(s,e)}));return t?u?n?e:l.concat(e,[s]):n?l.keep(e,(function(e){return r.caml_notequal(s,e)})):l.concat(e,[s]):u?n?e:[s]:n?[]:[s]}))}t.Navigation=h,t.firstIndex=g,t.equals=p,t.diff=x,t.selectIndex=f,t.useControls=function(e,t){var n=o.useState((function(){return[]})),r=n[1],l=n[0],s=o.useState((function(){return-1})),h=s[1],p=s[0],x=g(l);return{highlightedIndex:p,highlightFirst:function(e){return i._1(h,u)},highlightIndex:function(e){return i._1(h,(function(t){return e}))},highlightLast:function(e){return i._1(h,(function(e){return t-1|0}))},highlightNext:function(e){return i._1(h,(function(e){return a(t,e)}))},highlightPrev:function(e){return i._1(h,(function(e){return d(t,e)}))},resetHighlighted:function(e){return i._1(h,c)},selectedIndex:x,selectedIndexes:l,selectHighlighted:function(t){return f(void 0,e,h,r,p)},selectIndex:function(t){return f(void 0,e,h,r,t)},selectNext:function(n){return f(!0,e,h,r,a(t,p))},selectPrev:function(n){return f(!0,e,h,r,d(t,p))}}}},3586:function(e,t,n){"use strict";var i=n(3981),o=n(7719),r=n(8956);t.onKeyDown=function(e,t,n,o,r,l,s,u,a,d,c){var h=c.key,g=c.shiftKey;switch("Tab"!==h&&c.preventDefault(),h){case"ArrowDown":return l?g?i._1(u,void 0):i._1(o,void 0):i._1(d,void 0);case"ArrowUp":return l?g?i._1(a,void 0):i._1(r,void 0):i._1(d,void 0);case"End":return l?i._1(n,void 0):void 0;case" ":case"Enter":return l?(i._1(s,void 0),i._1(e,void 0)):i._1(d,void 0);case"Escape":return l?i._1(e,void 0):void 0;case"Home":return l?i._1(t,void 0):void 0;default:return}},t.onBlur=function(e,t,n,o){return void 0!==n&&n&&void 0!==t?i._1(t,void 0):i._1(e,void 0)},t.onFocus=function(e,t,n){return i._1(t,r.getWithDefault(o.get(o.reverse(e),0),0))},t.onClick=function(e,t,n){return i._1(t,e)},t.onDropdownClick=function(e,t,n,o){return e?i._1(t,void 0):i._1(n,void 0)}},3960:function(e,t,n){"use strict";var i=n(4427),o=n(7108).useDropdownListbox,r=i.noop,l=i.useListbox;t.useDropdownListbox=o,t.noop=r,t.useListbox=l},7108:function(e,t,n){"use strict";var i=n(7719),o=n(3586),r=n(8937);t.useDropdownListbox=function(e,t,n){var l=void 0!==t&&t,s=e.length,u=r.useControls(l,s),a=u.showMenu,d=u.selectPrev,c=u.selectNext,h=u.selectIndex,g=u.selectHighlighted,p=u.selectedIndexes,x=u.resetHighlighted,f=u.menuVisible,m=u.highlightPrev,b=u.highlightNext,v=u.highlightLast,k=u.highlightIndex,N=u.highlightFirst,I=u.hideMenu;return{highlightedIndex:u.highlightedIndex,menuVisible:f,selectedIndex:u.selectedIndex,selectedIndexes:p,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onKeyDown:function(e){},onFocus:function(e){return o.onFocus(p,k,e)}}},getDropdownProps:function(e){var t=f,n=I;return{role:"button",tabIndex:0,onBlur:function(e){return o.onBlur(x,n,t,e)},onClick:function(e){return o.onDropdownClick(f,I,a,e)},onKeyDown:function(e){return o.onKeyDown(I,N,v,b,m,f,g,c,d,a,e)}}},getOptionProps:function(e){return{"aria-selected":i.some(p,(function(t){return t===e})),role:"option",onClick:function(t){return o.onClick(e,h,t)}}},hideMenu:I,showMenu:a}}},4427:function(e,t,n){"use strict";var i=n(7719),o=n(3586),r=n(7361);function l(e){}t.noop=l,t.useListbox=function(e,t,n){var s=void 0!==t&&t,u=e.length,a=r.useControls(s,u),d=a.selectPrev,c=a.selectNext,h=a.selectIndex,g=a.selectHighlighted,p=a.selectedIndexes,x=a.resetHighlighted,f=a.highlightPrev,m=a.highlightNext,b=a.highlightLast,v=a.highlightIndex,k=a.highlightFirst;return{highlightedIndex:a.highlightedIndex,selectedIndex:a.selectedIndex,selectedIndexes:p,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onBlur:function(e){return o.onBlur(x,undefined,undefined,e)},onKeyDown:function(e){return o.onKeyDown(l,k,b,m,f,!0,g,c,d,l,e)},onFocus:function(e){return o.onFocus(p,v,e)}}},getOptionProps:function(e){return{"aria-selected":i.some(p,(function(t){return t===e})),role:"option",onClick:function(t){return o.onClick(e,h,t)}}}}}},6315:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return a},metadata:function(){return d},toc:function(){return c},default:function(){return g}});var i=n(4034),o=n(9973),r=(n(8758),n(3905)),l=n(573),s=["components"],u={id:"use_listbox",title:"useListbox",sidebar_label:"useListbox",slug:"/use_listbox"},a=void 0,d={unversionedId:"use_listbox",id:"use_listbox",isDocsHomePage:!1,title:"useListbox",description:"The useListbox hook provides the basic behaviours for implementing listbox components.",source:"@site/docs/use_listbox.mdx",sourceDirName:".",slug:"/use_listbox",permalink:"/listboxkit/docs/use_listbox",editUrl:"https://github.com/brnrdog/listbox/edit/master/docs/docs/use_listbox.mdx",version:"current",frontMatter:{id:"use_listbox",title:"useListbox",sidebar_label:"useListbox",slug:"/use_listbox"},sidebar:"docs",previous:{title:"Getting started",permalink:"/listboxkit/docs/"},next:{title:"useDropdownListbox",permalink:"/listboxkit/docs/use_dropdown_listbox"}},c=[{value:"Example",id:"example",children:[]}],h={toc:c};function g(e){var t=e.components,n=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The useListbox hook provides the basic behaviours for implementing listbox components."),(0,r.kt)("p",null,"Given a list of options, this hook returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"listbox")," record containing the listbox current state and functions to bind event handlers and aria attributes."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-res"},'  let options = ["Red", "Green", "Blue"]\n  let listbox = Listboxkit.useListbox(options, ~multiselect=true, ())\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Properties"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"highlightedIndex"),(0,r.kt)("td",{parentName:"tr",align:null},"int"),(0,r.kt)("td",{parentName:"tr",align:null},"The current highlighted index, returns ",(0,r.kt)("inlineCode",{parentName:"td"},"-1")," when no option is highlighted.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"selectedIndex"),(0,r.kt)("td",{parentName:"tr",align:null},"int"),(0,r.kt)("td",{parentName:"tr",align:null},"The current selected index, returns ",(0,r.kt)("inlineCode",{parentName:"td"},"-1")," when no option is selected.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"selectedIndexes"),(0,r.kt)("td",{parentName:"tr",align:null},"array<int",">"),(0,r.kt)("td",{parentName:"tr",align:null},"The current selected indexes, in case is a ",(0,r.kt)("inlineCode",{parentName:"td"},"multiselect")," is ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"getContainerProps"),(0,r.kt)("td",{parentName:"tr",align:null},"unit => listboxContainerProps"),(0,r.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the container element.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"getOptionProps"),(0,r.kt)("td",{parentName:"tr",align:null},"unit => listboxOptionProps"),(0,r.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the option elements.")))),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)(l.S,{mdxType:"Listbox"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rescript"},'let options = ["Red", "Green", "Blue"]\n\n@react.component\nlet make = () => {\n  let {highlightedIndex, getOptionProps, getContainerProps} = Listboxkit.useListbox(\n    options,\n    ~multiSelect=false,\n    (),\n  )\n\n  let {role, tabIndex, onKeyDown, onFocus, onBlur} = getContainerProps()\n  let listOption = (option, index) => {\n    let {ariaSelected, onClick, role} = getOptionProps(index)\n    let highlighted = highlightedIndex == index\n    let className = ["listbox-option", highlighted ? "highlighted" : ""]->Js.Array2.joinWith(" ")\n\n    <li className key=option onClick onKeyDown role ariaSelected> {option->React.string} </li>\n  }\n\n  <ul className="listbox" role tabIndex onKeyDown onFocus onBlur>\n    {options->Js.Array2.mapi(listOption)->React.array}\n  </ul>\n}\n\n')))}g.isMDXComponent=!0}}]);