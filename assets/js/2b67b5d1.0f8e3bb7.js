(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[49],{1953:function(e,t,n){"use strict";n.d(t,{vL:function(){return v},t0:function(){return k}});var i=n(9899),r=n(5699),o=n(9090);function l(e,t,n,i,o,l,s,u,a,d,c){var h=c.key,g=c.shiftKey;switch("Tab"!==h&&c.preventDefault(),h){case"ArrowDown":return l?g?r._1(u,void 0):r._1(i,void 0):r._1(d,void 0);case"ArrowUp":return l?g?r._1(a,void 0):r._1(o,void 0):r._1(d,void 0);case"End":return l?r._1(n,void 0):void 0;case" ":case"Enter":return l?(r._1(s,void 0),r._1(e,void 0)):r._1(d,void 0);case"Escape":return l?r._1(e,void 0):void 0;case"Home":return l?r._1(t,void 0):void 0;default:return}}function s(e,t,n,i){return void 0!==n&&n&&void 0!==t?r._1(t,void 0):r._1(e,void 0)}function u(e,t,n){return r._1(t,o.tj(i.U2(i.GY(e),0),0))}function a(e,t,n){return r._1(t,e)}var d=n(8758),c=n(2755);function h(e){return 0}function g(e,t){return 1==(e-t|0)?0:t+1|0}function p(e,t){return t<=0?e-1|0:t-1|0}function x(e){return-1}c.hZ,c.e0;function f(e,t,n,o,l){var s=void 0!==e&&e;r._1(n,(function(e){return l})),r._1(o,(function(e){var n=i.G(e,(function(e){return c.hZ(l,e)}));return t?s?n?e:i.zo(e,[l]):n?i.Cn(e,(function(e){return c.e0(l,e)})):i.zo(e,[l]):s?n?e:[l]:n?[]:[l]}))}function m(e,t){var n,l=d.useState((function(){return[]})),s=l[1],u=l[0],a=d.useState((function(){return-1})),c=a[1],m=a[0],b=(n=u,o.tj(i.U2(n,0),-1));return{highlightedIndex:m,highlightFirst:function(e){return r._1(c,h)},highlightIndex:function(e){return r._1(c,(function(t){return e}))},highlightLast:function(e){return r._1(c,(function(e){return t-1|0}))},highlightNext:function(e){return r._1(c,(function(e){return g(t,e)}))},highlightPrev:function(e){return r._1(c,(function(e){return p(t,e)}))},resetHighlighted:function(e){return r._1(c,x)},selectedIndex:b,selectedIndexes:u,selectHighlighted:function(t){return f(void 0,e,c,s,m)},selectIndex:function(t){return f(void 0,e,c,s,t)},selectNext:function(n){return f(!0,e,c,s,g(t,m))},selectPrev:function(n){return f(!0,e,c,s,p(t,m))}}}function b(e){}var v=function(e,t,n){var o=function(e,t){var n=m(void 0!==e&&e,t),i=n.selectIndex,o=d.useState((function(){return!1})),l=o[1];return{hideMenu:function(e){return r._1(l,(function(e){return!1}))},highlightedIndex:n.highlightedIndex,highlightFirst:n.highlightFirst,highlightIndex:n.highlightIndex,highlightLast:n.highlightLast,highlightNext:n.highlightNext,highlightPrev:n.highlightPrev,menuVisible:o[0],resetHighlighted:n.resetHighlighted,selectedIndex:n.selectedIndex,selectedIndexes:n.selectedIndexes,selectHighlighted:n.selectHighlighted,selectIndex:function(e){return r._1(i,e),r._1(l,(function(e){return!1}))},selectNext:n.selectNext,selectPrev:n.selectPrev,showMenu:function(e){return r._1(l,(function(e){return!0}))}}}(void 0!==t&&t,e.length),c=o.showMenu,h=o.selectPrev,g=o.selectNext,p=o.selectIndex,x=o.selectHighlighted,f=o.selectedIndexes,b=o.resetHighlighted,v=o.menuVisible,k=o.highlightPrev,N=o.highlightNext,_=o.highlightLast,I=o.highlightIndex,y=o.highlightFirst,P=o.hideMenu;return{highlightedIndex:o.highlightedIndex,menuVisible:v,selectedIndex:o.selectedIndex,selectedIndexes:f,getContainerProps:function(e){var t=v,n=P;return{role:"listbox",tabIndex:0,onBlur:function(e){return s(b,n,t)},onKeyDown:function(e){},onFocus:function(e){return u(f,I)}}},getDropdownProps:function(e){return{role:"button",tabIndex:0,onClick:function(e){return function(e,t,n,i){return e?r._1(t,void 0):r._1(n,void 0)}(v,P,c)},onKeyDown:function(e){return l(P,y,_,N,k,v,x,g,h,c,e)}}},getOptionProps:function(e){return{"aria-selected":i.G(f,(function(t){return t===e})),role:"option",onClick:function(t){return a(e,p)}}},hideMenu:P,showMenu:c}},k=function(e,t,n){var r=m(void 0!==t&&t,e.length),o=r.selectPrev,d=r.selectNext,c=r.selectIndex,h=r.selectHighlighted,g=r.selectedIndexes,p=r.resetHighlighted,x=r.highlightPrev,f=r.highlightNext,v=r.highlightLast,k=r.highlightIndex,N=r.highlightFirst;return{highlightedIndex:r.highlightedIndex,selectedIndex:r.selectedIndex,selectedIndexes:g,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onBlur:function(e){return s(p,undefined,undefined)},onKeyDown:function(e){return l(b,N,v,f,x,!0,h,d,o,b,e)},onFocus:function(e){return u(g,k)}}},getOptionProps:function(e){return{"aria-selected":i.G(g,(function(t){return t===e})),role:"option",onClick:function(t){return a(e,c)}}}}}},421:function(e,t,n){"use strict";n.r(t),n.d(t,{contentTitle:function(){return g},default:function(){return m},frontMatter:function(){return h},metadata:function(){return p},toc:function(){return x}});var i=n(4034),r=n(9973),o=n(8758),l=n(3905),s=n(5699),u=n(1953),a=["Red","Green","Blue"];var d=function(e){var t=e.multiSelect,n=void 0!==t&&t,i=u.t0(a,n,void 0),r=i.getOptionProps,l=i.highlightedIndex,d=s._1(i.getContainerProps,void 0),c=d.onKeyDown;return o.createElement("ul",{className:"listbox",role:d.role,tabIndex:d.tabIndex,onKeyDown:c,onFocus:d.onFocus,onBlur:d.onBlur},a.map((function(e,t){var n=s._1(r,t),i=["listbox-option",l===t?"highlighted":""].join(" ");return o.createElement("li",{key:e,"aria-selected":n["aria-selected"],className:i,role:n.role,onKeyDown:c,onClick:n.onClick},e)})))},c=["components"],h={id:"use_listbox",title:"useListbox",sidebar_label:"useListbox",slug:"/use_listbox"},g=void 0,p={unversionedId:"use_listbox",id:"use_listbox",isDocsHomePage:!1,title:"useListbox",description:"The useListbox hook provides the basic behaviours for implementing listbox components.",source:"@site/docs/use_listbox.mdx",sourceDirName:".",slug:"/use_listbox",permalink:"/listboxkit/docs/use_listbox",editUrl:"https://github.com/brnrdog/listbox/edit/master/docs/docs/use_listbox.mdx",version:"current",frontMatter:{id:"use_listbox",title:"useListbox",sidebar_label:"useListbox",slug:"/use_listbox"},sidebar:"docs",previous:{title:"Getting started",permalink:"/listboxkit/docs/"},next:{title:"useDropdownListbox",permalink:"/listboxkit/docs/use_dropdown_listbox"}},x=[{value:"Example",id:"example",children:[]}],f={toc:x};function m(e){var t=e.components,n=(0,r.Z)(e,c);return(0,l.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The useListbox hook provides the basic behaviours for implementing listbox components."),(0,l.kt)("p",null,"Given a list of options, this hook returns a ",(0,l.kt)("inlineCode",{parentName:"p"},"listbox")," record containing the listbox current state and functions to bind event handlers and aria attributes."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-res"},'  let options = ["Red", "Green", "Blue"]\n  let listbox = Listboxkit.useListbox(options, ~multiselect=true, ())\n')),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Properties"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"highlightedIndex"),(0,l.kt)("td",{parentName:"tr",align:null},"int"),(0,l.kt)("td",{parentName:"tr",align:null},"The current highlighted index, returns ",(0,l.kt)("inlineCode",{parentName:"td"},"-1")," when no option is highlighted.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"selectedIndex"),(0,l.kt)("td",{parentName:"tr",align:null},"int"),(0,l.kt)("td",{parentName:"tr",align:null},"The current selected index, returns ",(0,l.kt)("inlineCode",{parentName:"td"},"-1")," when no option is selected.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"selectedIndexes"),(0,l.kt)("td",{parentName:"tr",align:null},"array<int",">"),(0,l.kt)("td",{parentName:"tr",align:null},"The current selected indexes, in case is a ",(0,l.kt)("inlineCode",{parentName:"td"},"multiselect")," is ",(0,l.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"getContainerProps"),(0,l.kt)("td",{parentName:"tr",align:null},"unit => listboxContainerProps"),(0,l.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the container element.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"getOptionProps"),(0,l.kt)("td",{parentName:"tr",align:null},"unit => listboxOptionProps"),(0,l.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the option elements.")))),(0,l.kt)("h3",{id:"example"},"Example"),(0,l.kt)(d,{mdxType:"Listbox"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rescript"},'let options = ["Red", "Green", "Blue"]\n\n@react.component\nlet make = () => {\n  let {highlightedIndex, getOptionProps, getContainerProps} = Listboxkit.useListbox(\n    options,\n    ~multiSelect=false,\n    (),\n  )\n\n  let {role, tabIndex, onKeyDown, onFocus, onBlur} = getContainerProps()\n  let listOption = (option, index) => {\n    let {ariaSelected, onClick, role} = getOptionProps(index)\n    let highlighted = highlightedIndex == index\n    let className = ["listbox-option", highlighted ? "highlighted" : ""]->Js.Array2.joinWith(" ")\n\n    <li className key=option onClick onKeyDown role ariaSelected> {option->React.string} </li>\n  }\n\n  <ul className="listbox" role tabIndex onKeyDown onFocus onBlur>\n    {options->Js.Array2.mapi(listOption)->React.array}\n  </ul>\n}\n\n')))}m.isMDXComponent=!0}}]);