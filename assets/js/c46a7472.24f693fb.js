"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[828],{4192:function(e,n,t){var r=t(1386),o=t(7378),i=t(1748),u=t(3960),l=["Red","Green","Blue"];var s=function(e){var n=u.useDropdownListbox(l,!1,void 0),t=n.getOptionProps,s=n.selectedIndex,a=n.highlightedIndex,c=r._1(n.getContainerProps,void 0),d=c.onKeyDown,h=r._1(n.getDropdownProps,void 0),p=-1===s?"Select a color":i.get(l,s);return o.createElement("div",void 0,o.createElement("div",{className:"dropdown-button",role:h.role,tabIndex:h.tabIndex,onKeyDown:h.onKeyDown,onBlur:h.onBlur,onClick:h.onClick},p,o.createElement("div",{className:"dropdown"},o.createElement("ul",{className:"listbox",hidden:!n.menuVisible,role:c.role,tabIndex:c.tabIndex,onKeyDown:d,onFocus:c.onFocus},l.map((function(e,n){var i=r._1(t,n),u=["listbox-option",a===n?"highlighted":""].join(" ");return o.createElement("li",{key:e,"aria-selected":i["aria-selected"],className:u,role:i.role,onKeyDown:d,onClick:i.onClick},e)}))))))};n.S=s},8937:function(e,n,t){var r=t(3981),o=t(7378),i=t(7361);n.useControls=function(e,n){var t=void 0!==e&&e,u=i.useControls(t,n),l=u.selectIndex,s=o.useState((function(){return!1})),a=s[1];return{hideMenu:function(e){return r._1(a,(function(e){return!1}))},highlightedIndex:u.highlightedIndex,highlightFirst:u.highlightFirst,highlightIndex:u.highlightIndex,highlightLast:u.highlightLast,highlightNext:u.highlightNext,highlightPrev:u.highlightPrev,menuVisible:s[0],resetHighlighted:u.resetHighlighted,selectedIndex:u.selectedIndex,selectedIndexes:u.selectedIndexes,selectHighlighted:u.selectHighlighted,selectIndex:function(e){return r._1(l,e),r._1(a,(function(e){return!1}))},selectNext:u.selectNext,selectPrev:u.selectPrev,showMenu:function(e){return r._1(a,(function(e){return!0}))}}}},7361:function(e,n,t){var r=t(3981),o=t(7378),i=t(1509),u=t(7719),l=t(8956);function s(e){return 0}function a(e,n){return 1==(e-n|0)?0:n+1|0}function c(e,n){return n<=0?e-1|0:n-1|0}function d(e){return-1}var h={firstIndex:s,lastIndex:function(e,n){return e-1|0},nextIndex:a,prevIndex:c,reset:d};function p(e){return l.getWithDefault(u.get(e,0),-1)}var g=i.caml_equal,f=i.caml_notequal;function x(e,n,t,o,l){var s=void 0!==e&&e;r._1(t,(function(e){return l})),r._1(o,(function(e){var t=u.some(e,(function(e){return i.caml_equal(l,e)}));return n?s?t?e:u.concat(e,[l]):t?u.keep(e,(function(e){return i.caml_notequal(l,e)})):u.concat(e,[l]):s?t?e:[l]:t?[]:[l]}))}n.Navigation=h,n.firstIndex=p,n.equals=g,n.diff=f,n.selectIndex=x,n.useControls=function(e,n){var t=o.useState((function(){return[]})),i=t[1],u=t[0],l=o.useState((function(){return-1})),h=l[1],g=l[0],f=p(u);return{highlightedIndex:g,highlightFirst:function(e){return r._1(h,s)},highlightIndex:function(e){return r._1(h,(function(n){return e}))},highlightLast:function(e){return r._1(h,(function(e){return n-1|0}))},highlightNext:function(e){return r._1(h,(function(e){return a(n,e)}))},highlightPrev:function(e){return r._1(h,(function(e){return c(n,e)}))},resetHighlighted:function(e){return r._1(h,d)},selectedIndex:f,selectedIndexes:u,selectHighlighted:function(n){return x(void 0,e,h,i,g)},selectIndex:function(n){return x(void 0,e,h,i,n)},selectNext:function(t){return x(!0,e,h,i,a(n,g))},selectPrev:function(t){return x(!0,e,h,i,c(n,g))}}}},3586:function(e,n,t){var r=t(3981),o=t(7719),i=t(8956);var u=function(e){return e.relatedTarget&&e.target.contains(e.relatedTarget)},l={isEventFromInside:u};n.onKeyDown=function(e,n,t,o,i,u,l,s,a,c,d){var h=d.key,p=d.shiftKey;switch("Tab"!==h&&d.preventDefault(),h){case"ArrowDown":return u?p?r._1(s,void 0):r._1(o,void 0):r._1(c,void 0);case"ArrowUp":return u?p?r._1(a,void 0):r._1(i,void 0):r._1(c,void 0);case"End":return u?r._1(t,void 0):void 0;case" ":case"Enter":return u?(r._1(l,void 0),r._1(e,void 0)):r._1(c,void 0);case"Escape":return u?r._1(e,void 0):void 0;case"Home":return u?r._1(n,void 0):void 0;default:return}},n.Dom=l,n.onBlur=function(e,n,t,o){var i=u(o);return void 0!==t&&t&&void 0!==n&&!i?r._1(n,void 0):r._1(e,void 0)},n.onFocus=function(e,n,t){return r._1(n,i.getWithDefault(o.get(o.reverse(e),0),0))},n.onClick=function(e,n,t){return r._1(n,e)},n.onDropdownClick=function(e,n,t,o){return e?r._1(n,void 0):r._1(t,void 0)}},3960:function(e,n,t){var r=t(4427),o=t(7108).useDropdownListbox,i=r.noop,u=r.useListbox;n.useDropdownListbox=o,n.noop=i,n.useListbox=u,n.ListboxComponent=undefined},7108:function(e,n,t){var r=t(7719),o=t(3586),i=t(8937);n.useDropdownListbox=function(e,n,t){var u=void 0!==n&&n,l=e.length,s=i.useControls(u,l),a=s.showMenu,c=s.selectPrev,d=s.selectNext,h=s.selectIndex,p=s.selectHighlighted,g=s.selectedIndexes,f=s.resetHighlighted,x=s.menuVisible,m=s.highlightPrev,b=s.highlightNext,v=s.highlightLast,w=s.highlightIndex,k=s.highlightFirst,_=s.hideMenu;return{highlightedIndex:s.highlightedIndex,menuVisible:x,selectedIndex:s.selectedIndex,selectedIndexes:g,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onKeyDown:function(e){},onFocus:function(e){return o.onFocus(g,w,e)}}},getDropdownProps:function(e){var n=x,t=_;return{role:"combobox",tabIndex:0,onBlur:function(e){return o.onBlur(f,t,n,e)},onClick:function(e){return o.onDropdownClick(x,_,a,e)},onKeyDown:function(e){return o.onKeyDown(_,k,v,b,m,x,p,d,c,a,e)}}},getOptionProps:function(e){return{"aria-selected":r.some(g,(function(n){return n===e})),role:"option",onClick:function(n){return o.onClick(e,h,n)}}},hideMenu:_,showMenu:a}}},4427:function(e,n,t){var r=t(7719),o=t(3586),i=t(7361);function u(e){}n.noop=u,n.useListbox=function(e,n,t){var l=void 0!==n&&n,s=e.length,a=i.useControls(l,s),c=a.selectPrev,d=a.selectNext,h=a.selectIndex,p=a.selectHighlighted,g=a.selectedIndexes,f=a.resetHighlighted,x=a.highlightPrev,m=a.highlightNext,b=a.highlightLast,v=a.highlightIndex,w=a.highlightFirst;return{highlightedIndex:a.highlightedIndex,selectedIndex:a.selectedIndex,selectedIndexes:g,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onBlur:function(e){return o.onBlur(f,undefined,undefined,e)},onKeyDown:function(e){return o.onKeyDown(u,w,b,m,x,!0,p,d,c,u,e)},onFocus:function(e){return o.onFocus(g,v,e)}}},getOptionProps:function(e){return{"aria-selected":r.some(g,(function(n){return n===e})),role:"option",onClick:function(n){return o.onClick(e,h,n)}}}}}},6485:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return a},default:function(){return g},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return h}});var r=t(3117),o=t(102),i=(t(7378),t(3905)),u=t(4192),l=["components"],s={id:"use_dropdown_listbox",title:"useDropdownListbox",sidebar_label:"useDropdownListbox",slug:"/use_dropdown_listbox"},a=void 0,c={unversionedId:"use_dropdown_listbox",id:"use_dropdown_listbox",title:"useDropdownListbox",description:"The useDropdownListbox hook provides behaviours for implementing collapsible list boxes,",source:"@site/docs/use_dropdown_listbox.mdx",sourceDirName:".",slug:"/use_dropdown_listbox",permalink:"/listboxkit/docs/use_dropdown_listbox",editUrl:"https://github.com/brnrdog/listbox/edit/master/docs/docs/use_dropdown_listbox.mdx",tags:[],version:"current",frontMatter:{id:"use_dropdown_listbox",title:"useDropdownListbox",sidebar_label:"useDropdownListbox",slug:"/use_dropdown_listbox"},sidebar:"docs",previous:{title:"ListboxComponent",permalink:"/listboxkit/docs/listbox_component"}},d={},h=[{value:"DropdownListbox properties",id:"dropdownlistbox-properties",level:3},{value:"Example",id:"example",level:3}],p={toc:h};function g(e){var n=e.components,t=(0,o.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The useDropdownListbox hook provides behaviours for implementing collapsible list boxes,\nlike dropdown select components."),(0,i.kt)("p",null,"Given a list of options, this hook returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"dropdownListbox")," record containing the dropdown listbox current state and functions to control the listbox visibility and to bind event handlers and aria attributes."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-res"},'  let options = ["Red", "Green", "Blue"]\n  let dropdownListbox = Listboxkit.useDropdownListbox(options, ~multiselect=false, ())\n')),(0,i.kt)("h3",{id:"dropdownlistbox-properties"},"DropdownListbox properties"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Properties"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"highlightedIndex"),(0,i.kt)("td",{parentName:"tr",align:null},"int"),(0,i.kt)("td",{parentName:"tr",align:null},"The current highlighted index, returns ",(0,i.kt)("inlineCode",{parentName:"td"},"-1")," when no option is highlighted.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"menuVisible"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"Indicates whether the list box with its options is visible")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"selectedIndex"),(0,i.kt)("td",{parentName:"tr",align:null},"int"),(0,i.kt)("td",{parentName:"tr",align:null},"The current selected index, returns ",(0,i.kt)("inlineCode",{parentName:"td"},"-1")," when no option is selected.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"selectedIndexes"),(0,i.kt)("td",{parentName:"tr",align:null},"array<int",">"),(0,i.kt)("td",{parentName:"tr",align:null},"The current selected indexes, in case is a ",(0,i.kt)("inlineCode",{parentName:"td"},"multiselect")," is ",(0,i.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"getContainerProps"),(0,i.kt)("td",{parentName:"tr",align:null},"unit => listboxContainerProps"),(0,i.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the container element.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"getDropdownProps"),(0,i.kt)("td",{parentName:"tr",align:null},"unit => dropdownProps"),(0,i.kt)("td",{parentName:"tr",align:null},"Returns a record containning the properties to be used in the dropdown element.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"getOptionProps"),(0,i.kt)("td",{parentName:"tr",align:null},"unit => listboxOptionProps"),(0,i.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the option elements.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"hide"),(0,i.kt)("td",{parentName:"tr",align:null},"unit => unit"),(0,i.kt)("td",{parentName:"tr",align:null},"Hides the listbox element.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"show"),(0,i.kt)("td",{parentName:"tr",align:null},"unit => unit"),(0,i.kt)("td",{parentName:"tr",align:null},"Shows the listbox element.")))),(0,i.kt)("h3",{id:"example"},"Example"),(0,i.kt)(u.S,{mdxType:"DropdownSelect"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-rescript"},'let options = ["Red", "Green", "Blue"]\n\n@react.component\nlet make = () => {\n  let {\n    highlightedIndex,\n    menuVisible,\n    selectedIndex,\n    getOptionProps,\n    getDropdownProps,\n    getContainerProps,\n  } = .useDropdownListbox(options, ~multiSelect=false, ())\n\n  let {role, tabIndex, onKeyDown, onFocus, onBlur} = getContainerProps()\n\n  let dropdownProps = getDropdownProps()\n  let selectedOption = selectedIndex === -1 ? "Select a color" : options[selectedIndex]\n\n  <div>\n    <div\n      role=dropdownProps.role\n      tabIndex=dropdownProps.tabIndex\n      onClick=dropdownProps.onClick\n      className="dropdown-button"\n      onKeyDown=dropdownProps.onKeyDown>\n      {selectedOption->React.string}\n      <div className="dropdown">\n        <ul className="listbox" role tabIndex onKeyDown onFocus onBlur hidden={!menuVisible}>\n          {options\n          ->Js.Array2.mapi((option, index) => {\n            let {ariaSelected, onClick, role} = getOptionProps(index)\n            let highlighted = highlightedIndex == index\n            let className =\n              ["listbox-option", highlighted ? "highlighted" : ""]->Js.Array2.joinWith(" ")\n\n            <li className key=option onClick onKeyDown role ariaSelected>\n              {option->React.string}\n            </li>\n          })\n          ->React.array}\n        </ul>\n      </div>\n    </div>\n  </div>\n}\n\n')))}g.isMDXComponent=!0},1748:function(e,n){n.dup=function(e){return e.slice(0)},n.sub=function(e,n,t){for(var r=new Array(t),o=0,i=n;o<t;)r[o]=e[i],o=o+1|0,i=i+1|0;return r},n.concat=function(e){var n=function(e,n){for(;;){var t=n,r=e;if(!t)return r;n=t.tl,e=t.hd.length+r|0}}(0,e),t=new Array(n);return function(e,n,t){for(;;){var r=t,o=n;if(!r)return;for(var i=r.hd,u=i.length,l=o,s=0;s<u;)e[l]=i[s],l=l+1|0,s=s+1|0;t=r.tl,n=l}}(t,0,e),t},n.make=function(e,n){for(var t=new Array(e),r=0;r<e;++r)t[r]=n;return t},n.make_float=function(e){for(var n=new Array(e),t=0;t<e;++t)n[t]=0;return n},n.blit=function(e,n,t,r,o){if(r<=n)for(var i=0;i<o;++i)t[i+r|0]=e[i+n|0];else for(var u=o-1|0;u>=0;--u)t[u+r|0]=e[u+n|0]},n.get=function(e,n){if(n<0||n>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return e[n]},n.set=function(e,n,t){if(n<0||n>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};e[n]=t}},1386:function(e,n,t){var r=t(1748);function o(e,n){for(;;){var t=n,i=e,u=i.length,l=0===u?1:u,s=l-t.length|0;if(0===s)return i.apply(null,t);if(s>=0)return function(e,n){return function(t){return o(e,n.concat([t]))}}(i,t);n=r.sub(t,l,0|-s),e=i.apply(null,r.sub(t,0,l))}}function i(e,n){var t=e.length;if(1===t)return e(n);switch(t){case 1:return e(n);case 2:return function(t){return e(n,t)};case 3:return function(t,r){return e(n,t,r)};case 4:return function(t,r,o){return e(n,t,r,o)};case 5:return function(t,r,o,i){return e(n,t,r,o,i)};case 6:return function(t,r,o,i,u){return e(n,t,r,o,i,u)};case 7:return function(t,r,o,i,u,l){return e(n,t,r,o,i,u,l)};default:return o(e,[n])}}function u(e,n,t){var r=e.length;if(2===r)return e(n,t);switch(r){case 1:return o(e(n),[t]);case 2:return e(n,t);case 3:return function(r){return e(n,t,r)};case 4:return function(r,o){return e(n,t,r,o)};case 5:return function(r,o,i){return e(n,t,r,o,i)};case 6:return function(r,o,i,u){return e(n,t,r,o,i,u)};case 7:return function(r,o,i,u,l){return e(n,t,r,o,i,u,l)};default:return o(e,[n,t])}}function l(e,n,t,r){var i=e.length;if(3===i)return e(n,t,r);switch(i){case 1:return o(e(n),[t,r]);case 2:return o(e(n,t),[r]);case 3:return e(n,t,r);case 4:return function(o){return e(n,t,r,o)};case 5:return function(o,i){return e(n,t,r,o,i)};case 6:return function(o,i,u){return e(n,t,r,o,i,u)};case 7:return function(o,i,u,l){return e(n,t,r,o,i,u,l)};default:return o(e,[n,t,r])}}function s(e,n,t,r,i){var u=e.length;if(4===u)return e(n,t,r,i);switch(u){case 1:return o(e(n),[t,r,i]);case 2:return o(e(n,t),[r,i]);case 3:return o(e(n,t,r),[i]);case 4:return e(n,t,r,i);case 5:return function(o){return e(n,t,r,i,o)};case 6:return function(o,u){return e(n,t,r,i,o,u)};case 7:return function(o,u,l){return e(n,t,r,i,o,u,l)};default:return o(e,[n,t,r,i])}}function a(e,n,t,r,i,u){var l=e.length;if(5===l)return e(n,t,r,i,u);switch(l){case 1:return o(e(n),[t,r,i,u]);case 2:return o(e(n,t),[r,i,u]);case 3:return o(e(n,t,r),[i,u]);case 4:return o(e(n,t,r,i),[u]);case 5:return e(n,t,r,i,u);case 6:return function(o){return e(n,t,r,i,u,o)};case 7:return function(o,l){return e(n,t,r,i,u,o,l)};default:return o(e,[n,t,r,i,u])}}function c(e,n,t,r,i,u,l){var s=e.length;if(6===s)return e(n,t,r,i,u,l);switch(s){case 1:return o(e(n),[t,r,i,u,l]);case 2:return o(e(n,t),[r,i,u,l]);case 3:return o(e(n,t,r),[i,u,l]);case 4:return o(e(n,t,r,i),[u,l]);case 5:return o(e(n,t,r,i,u),[l]);case 6:return e(n,t,r,i,u,l);case 7:return function(o){return e(n,t,r,i,u,l,o)};default:return o(e,[n,t,r,i,u,l])}}function d(e,n,t,r,i,u,l,s){var a=e.length;if(7===a)return e(n,t,r,i,u,l,s);switch(a){case 1:return o(e(n),[t,r,i,u,l,s]);case 2:return o(e(n,t),[r,i,u,l,s]);case 3:return o(e(n,t,r),[i,u,l,s]);case 4:return o(e(n,t,r,i),[u,l,s]);case 5:return o(e(n,t,r,i,u),[l,s]);case 6:return o(e(n,t,r,i,u,l),[s]);case 7:return e(n,t,r,i,u,l,s);default:return o(e,[n,t,r,i,u,l,s])}}function h(e,n,t,r,i,u,l,s,a){var c=e.length;if(8===c)return e(n,t,r,i,u,l,s,a);switch(c){case 1:return o(e(n),[t,r,i,u,l,s,a]);case 2:return o(e(n,t),[r,i,u,l,s,a]);case 3:return o(e(n,t,r),[i,u,l,s,a]);case 4:return o(e(n,t,r,i),[u,l,s,a]);case 5:return o(e(n,t,r,i,u),[l,s,a]);case 6:return o(e(n,t,r,i,u,l),[s,a]);case 7:return o(e(n,t,r,i,u,l,s),[a]);default:return o(e,[n,t,r,i,u,l,s,a])}}n.app=o,n._1=i,n.__1=function(e){return 1===e.length?e:function(n){return i(e,n)}},n._2=u,n.__2=function(e){return 2===e.length?e:function(n,t){return u(e,n,t)}},n._3=l,n.__3=function(e){return 3===e.length?e:function(n,t,r){return l(e,n,t,r)}},n._4=s,n.__4=function(e){return 4===e.length?e:function(n,t,r,o){return s(e,n,t,r,o)}},n._5=a,n.__5=function(e){return 5===e.length?e:function(n,t,r,o,i){return a(e,n,t,r,o,i)}},n._6=c,n.__6=function(e){return 6===e.length?e:function(n,t,r,o,i,u){return c(e,n,t,r,o,i,u)}},n._7=d,n.__7=function(e){return 7===e.length?e:function(n,t,r,o,i,u,l){return d(e,n,t,r,o,i,u,l)}},n._8=h,n.__8=function(e){return 8===e.length?e:function(n,t,r,o,i,u,l,s){return h(e,n,t,r,o,i,u,l,s)}}}}]);