(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[828],{1953:function(e,t,n){"use strict";n.d(t,{vL:function(){return k},t0:function(){return v}});var i=n(9899),o=n(5699),r=n(9090);function l(e,t,n,i,r,l,d,s,a,u,c){var h=c.key,p=c.shiftKey;switch("Tab"!==h&&c.preventDefault(),h){case"ArrowDown":return l?p?o._1(s,void 0):o._1(i,void 0):o._1(u,void 0);case"ArrowUp":return l?p?o._1(a,void 0):o._1(r,void 0):o._1(u,void 0);case"End":return l?o._1(n,void 0):void 0;case" ":case"Enter":return l?(o._1(d,void 0),o._1(e,void 0)):o._1(u,void 0);case"Escape":return l?o._1(e,void 0):void 0;case"Home":return l?o._1(t,void 0):void 0;default:return}}function d(e,t,n,i){return void 0!==n&&n&&void 0!==t?o._1(t,void 0):o._1(e,void 0)}function s(e,t,n){return o._1(t,r.tj(i.U2(i.GY(e),0),0))}function a(e,t,n){return o._1(t,e)}var u=n(8758),c=n(2755);function h(e){return 0}function p(e,t){return 1==(e-t|0)?0:t+1|0}function g(e,t){return t<=0?e-1|0:t-1|0}function x(e){return-1}c.hZ,c.e0;function m(e,t,n,r,l){var d=void 0!==e&&e;o._1(n,(function(e){return l})),o._1(r,(function(e){var n=i.G(e,(function(e){return c.hZ(l,e)}));return t?d?n?e:i.zo(e,[l]):n?i.Cn(e,(function(e){return c.e0(l,e)})):i.zo(e,[l]):d?n?e:[l]:n?[]:[l]}))}function b(e,t){var n,l=u.useState((function(){return[]})),d=l[1],s=l[0],a=u.useState((function(){return-1})),c=a[1],b=a[0],f=(n=s,r.tj(i.U2(n,0),-1));return{highlightedIndex:b,highlightFirst:function(e){return o._1(c,h)},highlightIndex:function(e){return o._1(c,(function(t){return e}))},highlightLast:function(e){return o._1(c,(function(e){return t-1|0}))},highlightNext:function(e){return o._1(c,(function(e){return p(t,e)}))},highlightPrev:function(e){return o._1(c,(function(e){return g(t,e)}))},resetHighlighted:function(e){return o._1(c,x)},selectedIndex:f,selectedIndexes:s,selectHighlighted:function(t){return m(void 0,e,c,d,b)},selectIndex:function(t){return m(void 0,e,c,d,t)},selectNext:function(n){return m(!0,e,c,d,p(t,b))},selectPrev:function(n){return m(!0,e,c,d,g(t,b))}}}function f(e){}var k=function(e,t,n){var r=function(e,t){var n=b(void 0!==e&&e,t),i=n.selectIndex,r=u.useState((function(){return!1})),l=r[1];return{hideMenu:function(e){return o._1(l,(function(e){return!1}))},highlightedIndex:n.highlightedIndex,highlightFirst:n.highlightFirst,highlightIndex:n.highlightIndex,highlightLast:n.highlightLast,highlightNext:n.highlightNext,highlightPrev:n.highlightPrev,menuVisible:r[0],resetHighlighted:n.resetHighlighted,selectedIndex:n.selectedIndex,selectedIndexes:n.selectedIndexes,selectHighlighted:n.selectHighlighted,selectIndex:function(e){return o._1(i,e),o._1(l,(function(e){return!1}))},selectNext:n.selectNext,selectPrev:n.selectPrev,showMenu:function(e){return o._1(l,(function(e){return!0}))}}}(void 0!==t&&t,e.length),c=r.showMenu,h=r.selectPrev,p=r.selectNext,g=r.selectIndex,x=r.selectHighlighted,m=r.selectedIndexes,f=r.resetHighlighted,k=r.menuVisible,v=r.highlightPrev,w=r.highlightNext,N=r.highlightLast,_=r.highlightIndex,I=r.highlightFirst,D=r.hideMenu;return{highlightedIndex:r.highlightedIndex,menuVisible:k,selectedIndex:r.selectedIndex,selectedIndexes:m,getContainerProps:function(e){var t=k,n=D;return{role:"listbox",tabIndex:0,onBlur:function(e){return d(f,n,t)},onKeyDown:function(e){},onFocus:function(e){return s(m,_)}}},getDropdownProps:function(e){return{role:"button",tabIndex:0,onClick:function(e){return function(e,t,n,i){return e?o._1(t,void 0):o._1(n,void 0)}(k,D,c)},onKeyDown:function(e){return l(D,I,N,w,v,k,x,p,h,c,e)}}},getOptionProps:function(e){return{"aria-selected":i.G(m,(function(t){return t===e})),role:"option",onClick:function(t){return a(e,g)}}},hideMenu:D,showMenu:c}},v=function(e,t,n){var o=b(void 0!==t&&t,e.length),r=o.selectPrev,u=o.selectNext,c=o.selectIndex,h=o.selectHighlighted,p=o.selectedIndexes,g=o.resetHighlighted,x=o.highlightPrev,m=o.highlightNext,k=o.highlightLast,v=o.highlightIndex,w=o.highlightFirst;return{highlightedIndex:o.highlightedIndex,selectedIndex:o.selectedIndex,selectedIndexes:p,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onBlur:function(e){return d(g,undefined,undefined)},onKeyDown:function(e){return l(f,w,k,m,x,!0,h,u,r,f,e)},onFocus:function(e){return s(p,v)}}},getOptionProps:function(e){return{"aria-selected":i.G(p,(function(t){return t===e})),role:"option",onClick:function(t){return a(e,c)}}}}}},7467:function(e,t,n){"use strict";n.r(t),n.d(t,{contentTitle:function(){return g},default:function(){return f},frontMatter:function(){return p},metadata:function(){return x},toc:function(){return m}});var i=n(4034),o=n(9973),r=n(8758),l=n(3905),d=n(5699),s=n(7918),a=n(1953),u=["Red","Green","Blue"];var c=function(e){var t=a.vL(u,!1,void 0),n=t.getOptionProps,i=t.selectedIndex,o=t.highlightedIndex,l=d._1(t.getContainerProps,void 0),c=l.onKeyDown,h=d._1(t.getDropdownProps,void 0),p=-1===i?"Select a color":s.U2(u,i);return r.createElement("div",void 0,r.createElement("div",{className:"dropdown-button",role:h.role,tabIndex:h.tabIndex,onKeyDown:h.onKeyDown,onClick:h.onClick},p,r.createElement("div",{className:"dropdown"},r.createElement("ul",{className:"listbox",hidden:!t.menuVisible,role:l.role,tabIndex:l.tabIndex,onKeyDown:c,onFocus:l.onFocus,onBlur:l.onBlur},u.map((function(e,t){var i=d._1(n,t),l=["listbox-option",o===t?"highlighted":""].join(" ");return r.createElement("li",{key:e,"aria-selected":i["aria-selected"],className:l,role:i.role,onKeyDown:c,onClick:i.onClick},e)}))))))},h=["components"],p={id:"use_dropdown_listbox",title:"useDropdownListbox",sidebar_label:"useDropdownListbox",slug:"/use_dropdown_listbox"},g=void 0,x={unversionedId:"use_dropdown_listbox",id:"use_dropdown_listbox",isDocsHomePage:!1,title:"useDropdownListbox",description:"The useDropdownListbox hook provides behaviours for implementing collapsible list boxes,",source:"@site/docs/use_dropdown_listbox.mdx",sourceDirName:".",slug:"/use_dropdown_listbox",permalink:"/listboxkit/docs/use_dropdown_listbox",editUrl:"https://github.com/brnrdog/listbox/edit/master/docs/docs/use_dropdown_listbox.mdx",version:"current",frontMatter:{id:"use_dropdown_listbox",title:"useDropdownListbox",sidebar_label:"useDropdownListbox",slug:"/use_dropdown_listbox"},sidebar:"docs",previous:{title:"useListbox",permalink:"/listboxkit/docs/use_listbox"}},m=[{value:"DropdownListbox properties",id:"dropdownlistbox-properties",children:[]},{value:"Example",id:"example",children:[]}],b={toc:m};function f(e){var t=e.components,n=(0,o.Z)(e,h);return(0,l.kt)("wrapper",(0,i.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The useDropdownListbox hook provides behaviours for implementing collapsible list boxes,\nlike dropdown select components."),(0,l.kt)("p",null,"Given a list of options, this hook returns a ",(0,l.kt)("inlineCode",{parentName:"p"},"dropdownListbox")," record containing the dropdown listbox current state and functions to control the listbox visibility and to bind event handlers and aria attributes."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-res"},'  let options = ["Red", "Green", "Blue"]\n  let dropdownListbox = Listboxkit.useDropdownListbox(options, ~multiselect=false, ())\n')),(0,l.kt)("h3",{id:"dropdownlistbox-properties"},"DropdownListbox properties"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Properties"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"highlightedIndex"),(0,l.kt)("td",{parentName:"tr",align:null},"int"),(0,l.kt)("td",{parentName:"tr",align:null},"The current highlighted index, returns ",(0,l.kt)("inlineCode",{parentName:"td"},"-1")," when no option is highlighted.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"menuVisible"),(0,l.kt)("td",{parentName:"tr",align:null},"bool"),(0,l.kt)("td",{parentName:"tr",align:null},"Indicates whether the list box with its options is visible")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"selectedIndex"),(0,l.kt)("td",{parentName:"tr",align:null},"int"),(0,l.kt)("td",{parentName:"tr",align:null},"The current selected index, returns ",(0,l.kt)("inlineCode",{parentName:"td"},"-1")," when no option is selected.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"selectedIndexes"),(0,l.kt)("td",{parentName:"tr",align:null},"array<int",">"),(0,l.kt)("td",{parentName:"tr",align:null},"The current selected indexes, in case is a ",(0,l.kt)("inlineCode",{parentName:"td"},"multiselect")," is ",(0,l.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"getContainerProps"),(0,l.kt)("td",{parentName:"tr",align:null},"unit => listboxContainerProps"),(0,l.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the container element.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"getDropdownProps"),(0,l.kt)("td",{parentName:"tr",align:null},"unit => dropdownProps"),(0,l.kt)("td",{parentName:"tr",align:null},"Returns a record containning the properties to be used in the dropdown element.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"getOptionProps"),(0,l.kt)("td",{parentName:"tr",align:null},"unit => listboxOptionProps"),(0,l.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the option elements.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"hide"),(0,l.kt)("td",{parentName:"tr",align:null},"unit => unit"),(0,l.kt)("td",{parentName:"tr",align:null},"Hides the listbox element.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"show"),(0,l.kt)("td",{parentName:"tr",align:null},"unit => unit"),(0,l.kt)("td",{parentName:"tr",align:null},"Shows the listbox element.")))),(0,l.kt)("h3",{id:"example"},"Example"),(0,l.kt)(c,{mdxType:"DropdownSelect"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rescript"},'let options = ["Red", "Green", "Blue"]\n\n@react.component\nlet make = () => {\n  let {\n    highlightedIndex,\n    menuVisible,\n    selectedIndex,\n    getOptionProps,\n    getDropdownProps,\n    getContainerProps,\n  } = Listboxkit.useDropdownListbox(options, ~multiSelect=false, ())\n\n  let {role, tabIndex, onKeyDown, onFocus, onBlur} = getContainerProps()\n\n  let dropdownProps = getDropdownProps()\n  let selectedOption = selectedIndex === -1 ? "Select a color" : options[selectedIndex]\n\n  <div>\n    <div\n      role=dropdownProps.role\n      tabIndex=dropdownProps.tabIndex\n      onClick=dropdownProps.onClick\n      className="dropdown-button"\n      onKeyDown=dropdownProps.onKeyDown>\n      {selectedOption->React.string}\n      <div className="dropdown">\n        <ul className="listbox" role tabIndex onKeyDown onFocus onBlur hidden={!menuVisible}>\n          {options\n          ->Js.Array2.mapi((option, index) => {\n            let {ariaSelected, onClick, role} = getOptionProps(index)\n            let highlighted = highlightedIndex == index\n            let className =\n              ["listbox-option", highlighted ? "highlighted" : ""]->Js.Array2.joinWith(" ")\n\n            <li className key=option onClick onKeyDown role ariaSelected>\n              {option->React.string}\n            </li>\n          })\n          ->React.array}\n        </ul>\n      </div>\n    </div>\n  </div>\n}\n\n')))}f.isMDXComponent=!0}}]);