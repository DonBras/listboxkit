"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[49],{573:function(e,t,n){var r=n(1386),i=n(7378),o=n(3960),u=["Red","Green","Blue"];var s=function(e){var t=e.multiSelect,n=void 0!==t&&t,s=o.useListbox(u,n,void 0),l=s.getOptionProps,a=s.highlightedIndex,c=r._1(s.getContainerProps,void 0),d=c.onKeyDown;return i.createElement("ul",{className:"listbox",role:c.role,tabIndex:c.tabIndex,onKeyDown:d,onFocus:c.onFocus,onBlur:c.onBlur},u.map((function(e,t){var n=r._1(l,t),o=["listbox-option",a===t?"highlighted":""].join(" ");return i.createElement("li",{key:e,"aria-selected":n["aria-selected"],className:o,role:n.role,onKeyDown:d,onClick:n.onClick},e)})))};t.S=s},8937:function(e,t,n){var r=n(3981),i=n(7378),o=n(7361);t.useControls=function(e,t){var n=void 0!==e&&e,u=o.useControls(n,t),s=u.selectIndex,l=i.useState((function(){return!1})),a=l[1];return{hideMenu:function(e){return r._1(a,(function(e){return!1}))},highlightedIndex:u.highlightedIndex,highlightFirst:u.highlightFirst,highlightIndex:u.highlightIndex,highlightLast:u.highlightLast,highlightNext:u.highlightNext,highlightPrev:u.highlightPrev,menuVisible:l[0],resetHighlighted:u.resetHighlighted,selectedIndex:u.selectedIndex,selectedIndexes:u.selectedIndexes,selectHighlighted:u.selectHighlighted,selectIndex:function(e){return r._1(s,e),r._1(a,(function(e){return!1}))},selectNext:u.selectNext,selectPrev:u.selectPrev,showMenu:function(e){return r._1(a,(function(e){return!0}))}}}},7361:function(e,t,n){var r=n(3981),i=n(7378),o=n(1509),u=n(7719),s=n(8956);function l(e){return 0}function a(e,t){return 1==(e-t|0)?0:t+1|0}function c(e,t){return t<=0?e-1|0:t-1|0}function d(e){return-1}var h={firstIndex:l,lastIndex:function(e,t){return e-1|0},nextIndex:a,prevIndex:c,reset:d};function f(e){return s.getWithDefault(u.get(e,0),-1)}var g=o.caml_equal,p=o.caml_notequal;function x(e,t,n,i,s){var l=void 0!==e&&e;r._1(n,(function(e){return s})),r._1(i,(function(e){var n=u.some(e,(function(e){return o.caml_equal(s,e)}));return t?l?n?e:u.concat(e,[s]):n?u.keep(e,(function(e){return o.caml_notequal(s,e)})):u.concat(e,[s]):l?n?e:[s]:n?[]:[s]}))}t.Navigation=h,t.firstIndex=f,t.equals=g,t.diff=p,t.selectIndex=x,t.useControls=function(e,t){var n=i.useState((function(){return[]})),o=n[1],u=n[0],s=i.useState((function(){return-1})),h=s[1],g=s[0],p=f(u);return{highlightedIndex:g,highlightFirst:function(e){return r._1(h,l)},highlightIndex:function(e){return r._1(h,(function(t){return e}))},highlightLast:function(e){return r._1(h,(function(e){return t-1|0}))},highlightNext:function(e){return r._1(h,(function(e){return a(t,e)}))},highlightPrev:function(e){return r._1(h,(function(e){return c(t,e)}))},resetHighlighted:function(e){return r._1(h,d)},selectedIndex:p,selectedIndexes:u,selectHighlighted:function(t){return x(void 0,e,h,o,g)},selectIndex:function(t){return x(void 0,e,h,o,t)},selectNext:function(n){return x(!0,e,h,o,a(t,g))},selectPrev:function(n){return x(!0,e,h,o,c(t,g))}}}},3586:function(e,t,n){var r=n(3981),i=n(7719),o=n(8956);var u=function(e){return e.relatedTarget&&e.target.contains(e.relatedTarget)},s={isEventFromInside:u};t.onKeyDown=function(e,t,n,i,o,u,s,l,a,c,d){var h=d.key,f=d.shiftKey;switch("Tab"!==h&&d.preventDefault(),h){case"ArrowDown":return u?f?r._1(l,void 0):r._1(i,void 0):r._1(c,void 0);case"ArrowUp":return u?f?r._1(a,void 0):r._1(o,void 0):r._1(c,void 0);case"End":return u?r._1(n,void 0):void 0;case" ":case"Enter":return u?(r._1(s,void 0),r._1(e,void 0)):r._1(c,void 0);case"Escape":return u?r._1(e,void 0):void 0;case"Home":return u?r._1(t,void 0):void 0;default:return}},t.Dom=s,t.onBlur=function(e,t,n,i){var o=u(i);return void 0!==n&&n&&void 0!==t&&!o?r._1(t,void 0):r._1(e,void 0)},t.onFocus=function(e,t,n){return r._1(t,o.getWithDefault(i.get(i.reverse(e),0),0))},t.onClick=function(e,t,n){return r._1(t,e)},t.onDropdownClick=function(e,t,n,i){return e?r._1(t,void 0):r._1(n,void 0)}},3960:function(e,t,n){var r=n(4427),i=n(7108).useDropdownListbox,o=r.noop,u=r.useListbox;t.useDropdownListbox=i,t.noop=o,t.useListbox=u,t.ListboxComponent=undefined},7108:function(e,t,n){var r=n(7719),i=n(3586),o=n(8937);t.useDropdownListbox=function(e,t,n){var u=void 0!==t&&t,s=e.length,l=o.useControls(u,s),a=l.showMenu,c=l.selectPrev,d=l.selectNext,h=l.selectIndex,f=l.selectHighlighted,g=l.selectedIndexes,p=l.resetHighlighted,x=l.menuVisible,v=l.highlightPrev,m=l.highlightNext,b=l.highlightLast,_=l.highlightIndex,k=l.highlightFirst,I=l.hideMenu;return{highlightedIndex:l.highlightedIndex,menuVisible:x,selectedIndex:l.selectedIndex,selectedIndexes:g,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onKeyDown:function(e){},onFocus:function(e){return i.onFocus(g,_,e)}}},getDropdownProps:function(e){var t=x,n=I;return{role:"combobox",tabIndex:0,onBlur:function(e){return i.onBlur(p,n,t,e)},onClick:function(e){return i.onDropdownClick(x,I,a,e)},onKeyDown:function(e){return i.onKeyDown(I,k,b,m,v,x,f,d,c,a,e)}}},getOptionProps:function(e){return{"aria-selected":r.some(g,(function(t){return t===e})),role:"option",onClick:function(t){return i.onClick(e,h,t)}}},hideMenu:I,showMenu:a}}},4427:function(e,t,n){var r=n(7719),i=n(3586),o=n(7361);function u(e){}t.noop=u,t.useListbox=function(e,t,n){var s=void 0!==t&&t,l=e.length,a=o.useControls(s,l),c=a.selectPrev,d=a.selectNext,h=a.selectIndex,f=a.selectHighlighted,g=a.selectedIndexes,p=a.resetHighlighted,x=a.highlightPrev,v=a.highlightNext,m=a.highlightLast,b=a.highlightIndex,_=a.highlightFirst;return{highlightedIndex:a.highlightedIndex,selectedIndex:a.selectedIndex,selectedIndexes:g,getContainerProps:function(e){return{role:"listbox",tabIndex:0,onBlur:function(e){return i.onBlur(p,undefined,undefined,e)},onKeyDown:function(e){return i.onKeyDown(u,_,m,v,x,!0,f,d,c,u,e)},onFocus:function(e){return i.onFocus(g,b,e)}}},getOptionProps:function(e){return{"aria-selected":r.some(g,(function(t){return t===e})),role:"option",onClick:function(t){return i.onClick(e,h,t)}}}}}},2363:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return a},default:function(){return g},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return h}});var r=n(3117),i=n(102),o=(n(7378),n(3905)),u=n(573),s=["components"],l={id:"use_listbox",title:"useListbox",sidebar_label:"useListbox",slug:"/use_listbox"},a=void 0,c={unversionedId:"use_listbox",id:"use_listbox",title:"useListbox",description:"The useListbox hook provides the basic behaviours for implementing listbox components.",source:"@site/docs/use_listbox.mdx",sourceDirName:".",slug:"/use_listbox",permalink:"/listboxkit/docs/use_listbox",editUrl:"https://github.com/brnrdog/listbox/edit/master/docs/docs/use_listbox.mdx",tags:[],version:"current",frontMatter:{id:"use_listbox",title:"useListbox",sidebar_label:"useListbox",slug:"/use_listbox"},sidebar:"docs",previous:{title:"Getting started",permalink:"/listboxkit/docs/"},next:{title:"ListboxComponent",permalink:"/listboxkit/docs/listbox_component"}},d={},h=[{value:"Example",id:"example",level:3}],f={toc:h};function g(e){var t=e.components,n=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The useListbox hook provides the basic behaviours for implementing listbox components."),(0,o.kt)("p",null,"Given a list of options, this hook returns a ",(0,o.kt)("inlineCode",{parentName:"p"},"listbox")," record containing the listbox current state and functions to bind event handlers and aria attributes."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-res"},'  let options = ["Red", "Green", "Blue"]\n  let listbox = Listboxkit.useListbox(options, ~multiselect=true, ())\n')),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Properties"),(0,o.kt)("th",{parentName:"tr",align:null},"Type"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"highlightedIndex"),(0,o.kt)("td",{parentName:"tr",align:null},"int"),(0,o.kt)("td",{parentName:"tr",align:null},"The current highlighted index, returns ",(0,o.kt)("inlineCode",{parentName:"td"},"-1")," when no option is highlighted.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"selectedIndex"),(0,o.kt)("td",{parentName:"tr",align:null},"int"),(0,o.kt)("td",{parentName:"tr",align:null},"The current selected index, returns ",(0,o.kt)("inlineCode",{parentName:"td"},"-1")," when no option is selected.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"selectedIndexes"),(0,o.kt)("td",{parentName:"tr",align:null},"array<int",">"),(0,o.kt)("td",{parentName:"tr",align:null},"The current selected indexes, in case is a ",(0,o.kt)("inlineCode",{parentName:"td"},"multiselect")," is ",(0,o.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"getContainerProps"),(0,o.kt)("td",{parentName:"tr",align:null},"unit => listboxContainerProps"),(0,o.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the container element.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"getOptionProps"),(0,o.kt)("td",{parentName:"tr",align:null},"unit => listboxOptionProps"),(0,o.kt)("td",{parentName:"tr",align:null},"Returns a record containing the properties to be used in the option elements.")))),(0,o.kt)("h3",{id:"example"},"Example"),(0,o.kt)(u.S,{mdxType:"Listbox"}),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rescript"},'let options = ["Red", "Green", "Blue"]\n\n@react.component\nlet make = () => {\n  let {highlightedIndex, getOptionProps, getContainerProps} = Listboxkit.useListbox(\n    options,\n    ~multiSelect=false,\n    (),\n  )\n\n  let {role, tabIndex, onKeyDown, onFocus, onBlur} = getContainerProps()\n  let listOption = (option, index) => {\n    let {ariaSelected, onClick, role} = getOptionProps(index)\n    let highlighted = highlightedIndex == index\n    let className = ["listbox-option", highlighted ? "highlighted" : ""]->Js.Array2.joinWith(" ")\n\n    <li className key=option onClick onKeyDown role ariaSelected> {option->React.string} </li>\n  }\n\n  <ul className="listbox" role tabIndex onKeyDown onFocus onBlur>\n    {options->Js.Array2.mapi(listOption)->React.array}\n  </ul>\n}\n\n')))}g.isMDXComponent=!0},1748:function(e,t){t.dup=function(e){return e.slice(0)},t.sub=function(e,t,n){for(var r=new Array(n),i=0,o=t;i<n;)r[i]=e[o],i=i+1|0,o=o+1|0;return r},t.concat=function(e){var t=function(e,t){for(;;){var n=t,r=e;if(!n)return r;t=n.tl,e=n.hd.length+r|0}}(0,e),n=new Array(t);return function(e,t,n){for(;;){var r=n,i=t;if(!r)return;for(var o=r.hd,u=o.length,s=i,l=0;l<u;)e[s]=o[l],s=s+1|0,l=l+1|0;n=r.tl,t=s}}(n,0,e),n},t.make=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n},t.make_float=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t},t.blit=function(e,t,n,r,i){if(r<=t)for(var o=0;o<i;++o)n[o+r|0]=e[o+t|0];else for(var u=i-1|0;u>=0;--u)n[u+r|0]=e[u+t|0]},t.get=function(e,t){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return e[t]},t.set=function(e,t,n){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};e[t]=n}},1386:function(e,t,n){var r=n(1748);function i(e,t){for(;;){var n=t,o=e,u=o.length,s=0===u?1:u,l=s-n.length|0;if(0===l)return o.apply(null,n);if(l>=0)return function(e,t){return function(n){return i(e,t.concat([n]))}}(o,n);t=r.sub(n,s,0|-l),e=o.apply(null,r.sub(n,0,s))}}function o(e,t){var n=e.length;if(1===n)return e(t);switch(n){case 1:return e(t);case 2:return function(n){return e(t,n)};case 3:return function(n,r){return e(t,n,r)};case 4:return function(n,r,i){return e(t,n,r,i)};case 5:return function(n,r,i,o){return e(t,n,r,i,o)};case 6:return function(n,r,i,o,u){return e(t,n,r,i,o,u)};case 7:return function(n,r,i,o,u,s){return e(t,n,r,i,o,u,s)};default:return i(e,[t])}}function u(e,t,n){var r=e.length;if(2===r)return e(t,n);switch(r){case 1:return i(e(t),[n]);case 2:return e(t,n);case 3:return function(r){return e(t,n,r)};case 4:return function(r,i){return e(t,n,r,i)};case 5:return function(r,i,o){return e(t,n,r,i,o)};case 6:return function(r,i,o,u){return e(t,n,r,i,o,u)};case 7:return function(r,i,o,u,s){return e(t,n,r,i,o,u,s)};default:return i(e,[t,n])}}function s(e,t,n,r){var o=e.length;if(3===o)return e(t,n,r);switch(o){case 1:return i(e(t),[n,r]);case 2:return i(e(t,n),[r]);case 3:return e(t,n,r);case 4:return function(i){return e(t,n,r,i)};case 5:return function(i,o){return e(t,n,r,i,o)};case 6:return function(i,o,u){return e(t,n,r,i,o,u)};case 7:return function(i,o,u,s){return e(t,n,r,i,o,u,s)};default:return i(e,[t,n,r])}}function l(e,t,n,r,o){var u=e.length;if(4===u)return e(t,n,r,o);switch(u){case 1:return i(e(t),[n,r,o]);case 2:return i(e(t,n),[r,o]);case 3:return i(e(t,n,r),[o]);case 4:return e(t,n,r,o);case 5:return function(i){return e(t,n,r,o,i)};case 6:return function(i,u){return e(t,n,r,o,i,u)};case 7:return function(i,u,s){return e(t,n,r,o,i,u,s)};default:return i(e,[t,n,r,o])}}function a(e,t,n,r,o,u){var s=e.length;if(5===s)return e(t,n,r,o,u);switch(s){case 1:return i(e(t),[n,r,o,u]);case 2:return i(e(t,n),[r,o,u]);case 3:return i(e(t,n,r),[o,u]);case 4:return i(e(t,n,r,o),[u]);case 5:return e(t,n,r,o,u);case 6:return function(i){return e(t,n,r,o,u,i)};case 7:return function(i,s){return e(t,n,r,o,u,i,s)};default:return i(e,[t,n,r,o,u])}}function c(e,t,n,r,o,u,s){var l=e.length;if(6===l)return e(t,n,r,o,u,s);switch(l){case 1:return i(e(t),[n,r,o,u,s]);case 2:return i(e(t,n),[r,o,u,s]);case 3:return i(e(t,n,r),[o,u,s]);case 4:return i(e(t,n,r,o),[u,s]);case 5:return i(e(t,n,r,o,u),[s]);case 6:return e(t,n,r,o,u,s);case 7:return function(i){return e(t,n,r,o,u,s,i)};default:return i(e,[t,n,r,o,u,s])}}function d(e,t,n,r,o,u,s,l){var a=e.length;if(7===a)return e(t,n,r,o,u,s,l);switch(a){case 1:return i(e(t),[n,r,o,u,s,l]);case 2:return i(e(t,n),[r,o,u,s,l]);case 3:return i(e(t,n,r),[o,u,s,l]);case 4:return i(e(t,n,r,o),[u,s,l]);case 5:return i(e(t,n,r,o,u),[s,l]);case 6:return i(e(t,n,r,o,u,s),[l]);case 7:return e(t,n,r,o,u,s,l);default:return i(e,[t,n,r,o,u,s,l])}}function h(e,t,n,r,o,u,s,l,a){var c=e.length;if(8===c)return e(t,n,r,o,u,s,l,a);switch(c){case 1:return i(e(t),[n,r,o,u,s,l,a]);case 2:return i(e(t,n),[r,o,u,s,l,a]);case 3:return i(e(t,n,r),[o,u,s,l,a]);case 4:return i(e(t,n,r,o),[u,s,l,a]);case 5:return i(e(t,n,r,o,u),[s,l,a]);case 6:return i(e(t,n,r,o,u,s),[l,a]);case 7:return i(e(t,n,r,o,u,s,l),[a]);default:return i(e,[t,n,r,o,u,s,l,a])}}t.app=i,t._1=o,t.__1=function(e){return 1===e.length?e:function(t){return o(e,t)}},t._2=u,t.__2=function(e){return 2===e.length?e:function(t,n){return u(e,t,n)}},t._3=s,t.__3=function(e){return 3===e.length?e:function(t,n,r){return s(e,t,n,r)}},t._4=l,t.__4=function(e){return 4===e.length?e:function(t,n,r,i){return l(e,t,n,r,i)}},t._5=a,t.__5=function(e){return 5===e.length?e:function(t,n,r,i,o){return a(e,t,n,r,i,o)}},t._6=c,t.__6=function(e){return 6===e.length?e:function(t,n,r,i,o,u){return c(e,t,n,r,i,o,u)}},t._7=d,t.__7=function(e){return 7===e.length?e:function(t,n,r,i,o,u,s){return d(e,t,n,r,i,o,u,s)}},t._8=h,t.__8=function(e){return 8===e.length?e:function(t,n,r,i,o,u,s,l){return h(e,t,n,r,i,o,u,s,l)}}}}]);